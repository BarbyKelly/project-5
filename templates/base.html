<!-- Base for base.html from Boutique Ado, like most of this project. -->
{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    {% block meta %}
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="google-site-verification" content="2GllS38cQ4AvENLO6njtCQI0HR2M-_2-azChKY6Djns" />

      <!-- Basic SEO - created with ChatGPT's guidance -->
      <meta name="description" content="Kelly's Art & Photo Boutique - children's original handmade art and variety of photos, ideal as gifts or décor">
      <meta name="keywords" content="art, photos, boutique, handmade, original, Kelly's Art & Photo Boutique, gifts, décor">
      <meta name="author" content="Kelly's Art & Photo Boutique, Aoife Kelly, Barby Kelly, Ciara Kelly">

      <!-- Open Graph, Facebook, and WhatsApp - learned from ChatGPT -->
      <meta property="og:title" content="Kelly's Art & Photo Boutique">
      <meta property="og:description" content="Children's original handmade art and variety of photos, ideal as gifts or décor">
      <meta property="og:type" content="website">
      <meta property="og:url" content="https://kellys-art-and-photo-boutique-913058c0223e.herokuapp.com/">
      <meta property="og:image" content="{% static 'images/social-preview.jpg' %}">

      <!-- Twitter Card  -->
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:title" content="Kelly's Art & Photo Boutique">
      <meta name="twitter:description" content="Children's original handmade art and variety of photos, ideal as gifts or décor">
      <meta name="twitter:image" content="{% static 'images/social-preview.jpg' %}">

      <!-- Favicon links -->
      <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon/apple-touch-icon.png' %}">
      <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon/favicon-32x32.png' %}">
      <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicon/favicon-16x16.png' %}">
      <link rel="shortcut icon" type="image/png"
            href="https://kellys-art-and-photo-boutique.s3.eu-north-1.amazonaws.com/media/logo_wireframe_by_aoife_ten_opt.png">
    {% endblock %}

    {% block extra_meta %}
    {% endblock %}

    {% block corecss %}
      <!-- Bootstrap 4.6.2 CSS -->
      <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
            crossorigin="anonymous">

      <!-- Google Fonts Preconnect -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

      <!-- Google Fonts Preload - copied from chatGPT, to improve loading time -->
      <link rel="preload"
            href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
      <noscript>
        <link rel="stylesheet"
              href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap">
      </noscript>

      <!-- Custom CSS -->
      <link rel="stylesheet" href="{% static 'css/base.css' %}">
    {% endblock %}

    {% block extra_css %}
    {% endblock %}

    {% block corejs %}
      <!-- Font Awesome -->
      <script src="https://kit.fontawesome.com/5d412561c7.js"
              crossorigin="anonymous"></script>

      <!-- jQuery -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
              integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
              crossorigin="anonymous"
              referrerpolicy="no-referrer"></script>

      <!-- Popper.js -->
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
              integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
              crossorigin="anonymous"></script>

      <!-- Bootstrap 4.6.2 JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
              integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
              crossorigin="anonymous"></script>

      <!-- Stripe -->
      <script src="https://js.stripe.com/v3/"></script>
    {% endblock %}

    {% block extra_js %}
    {% endblock %}

    <title>Kelly's Art & Photo Boutique {% block extra_title %}{% endblock %}</title>
  </head>
  <body class="d-flex flex-column h-100 main-bg">
    <!-- Header - fixed with chatGPT's help, to remove topnav, place Logo left and burger menu right for all screens -->
    <header class="container-fluid fixed-top header-container">
      <nav class="navbar navbar-expand-xl navbar-light bg-white w-100 justify-content-between py-2 shadow-sm position-relative">

        <!-- Logo - left on all screens -->
        <a href="{% url 'home' %}" class="nav-link main-logo-link">
          <img class="boutique-logo" src="{{ MEDIA_URL }}logo_wireframe_by_aoife_ten_opt.png" alt="Logo for Kelly's Art & Photo Boutique">
        </a>

        <!-- Icons on the right side: search and burger menu - fixed with chatGPT's guidance -->
        <div class="d-flex align-items-center order-xl-3 ml-auto header_icons">
          <!-- Search Icon - for all screens (placed after 'Sign Up' for larger screens, below burger dropdown on smaller screens) -->
          <a class="nav-link mr-2" href="{% url 'products' %}" id="search_toggle" aria-label="Search">
            <i class="fa-solid fa-magnifying-glass"></i>
          </a>

          <!-- Search Form - hidden until Search Icon is clicked - fixed with chatGPT's guidance -->
          <div class="search_form">
            <form method="GET" action="{% url 'products' %}" class="d-flex">
              <input type="text"
                     name="q"
                     class="form-control form-control-sm border border-black rounded-0"
                     placeholder="Search our Boutique"
                     aria-label="Search">
              <button type="submit"
                      class="btn btn-blue border border-black rounded-0 ml-1"
                      aria-label="Submit Search">
                <i class="fa-solid fa-magnifying-glass"></i>
              </button>
            </form>
          </div>

          <!-- Burger Menu (medium and small screens only) - on the right - fixed with chatGPT's guidance -->
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-nav"
                  aria-controls="main-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>

        <!-- Navbar Links -->
        <div class="collapse navbar-collapse" id="main-nav">
          <ul class="navbar-nav ml-auto align-items-center">
            <!-- Items from main-nav.html -->
            {% include 'includes/main-nav.html' %}
          </ul>
        </div>

      </nav>
    </header>

    {% if messages %}
        <div class="message-container">
          {% for message in messages %}
            {% with message.level as level %}
              {% if level == 40 %}
                {% include 'includes/toasts/toast_error.html' %}
              {% elif level == 30 %}
                {% include 'includes/toasts/toast_warning.html' %}
              {% elif level == 25 %}
                {% include 'includes/toasts/toast_success.html' %}
              {% else %}
                {% include 'includes/toasts/toast_info.html' %}
              {% endif %}
            {% endwith %}
          {% endfor %}
        </div>
    {% endif %}

    {% block page_header %}
    {% endblock %}

    {% block content %}
    {% endblock %}

    {% block postloadjs %}
    <script type="text/javascript">
      $('.toast').toast('show');
    </script>
    {% endblock %}
    <!-- Footer, base code from LoveRunning index.html-->
    <footer>
      <div class="footer">
        <hr>
        <div>
          Copyright &copy; 2025 | Barby Kelly | E-Commerce Project | Not for real transactions. 
          <div class="col-12">
          <a href="https://www.termsfeed.com/live/683c66f2-0b27-407d-970d-ea4c344d3557" target="_blank">Privacy Policy</a>
          </div>
        </div>
        <hr>
        <ul id="social-networks">
          <li><a class="social-networks" href="https://www.facebook.com/" target="_blank" rel="noopener"
          aria-label="Facebook home page (opens in a new tab)"><i class="fa-brands fa-square-facebook"></i></a>
          </li>
          <li><a class="social-networks" href="https://x.com/" target="_blank" rel="noopener"
          aria-label="X/Twitter home page (opens in a new tab)"><i class="fa-brands fa-square-x-twitter"></i></a>
          </li>
          <li><a class="social-networks" href="https://www.youtube.com/" target="_blank" rel="noopener"
          aria-label="YouTube home page (opens in a new tab)"><i class="fa-brands fa-youtube"></i></a>
          </li>
        </ul>
      </div>
    </footer>
    <!-- Script copied from ChatGPT, to help to show navbar items as active -->
    <script src="{% static 'js/active-nav.js' %}"></script>

    <!-- Script for Search and Burger Menu - learned from ChatGPT -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toggle = document.getElementById("search_toggle");
        const searchForm = document.querySelector(".search_form");
        const searchInput = searchForm.querySelector("input[name='q']");
        const navBarCollapse = document.getElementById("main-nav");

        // Toggle Search Form
        toggle.addEventListener("click", function (e) {
          e.preventDefault();
          e.stopPropagation();
          const isActive = searchForm.classList.toggle("active");

          // Close Burger Menu if Search Form opens
          if (isActive && navBarCollapse.classList.contains("show")) {
            $(navBarCollapse).collapse('hide');
          }

          if (isActive) {
            searchInput.focus();
          }
        });

        // Close Search Form and Burger Menu when clicking outside of either one
        document.addEventListener("click", function (e) {
          if (
            searchForm.classList.contains("active") &&
            !searchForm.contains(e.target) &&
            e.target !== toggle
        ) {
          searchForm.classList.remove("active");
        }

        // Close Burger Menu if click outside of it
        if (
          navBarCollapse.classList.contains("show") &&
          !navBarCollapse.contains(e.target) &&
          !e.target.closest(".navbar-toggler")
        ) {
          $(navBarCollapse).collapse('hide');
        }
      });

      // Close Search Form on ESC key
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape" && searchForm.classList.contains("active")) {
          searchForm.classList.remove("active");
        }
        if (e.key === "Escape" && navBarCollapse.classList.contains("active")) {
          $(navBarCollapse).collapse('hide');
        }
      });
    });
    </script>
  </body>
</html>